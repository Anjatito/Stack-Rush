<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset='UTF-8' />
  <meta http-equiv='X-UA-Compatible' content='IE=edge' />
  <meta name='viewport' content='width=device-width,user-scalable=no' />

  <script src='https://cdnjs.cloudflare.com/ajax/libs/three.js/r83/three.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js'></script>
  <title>Stack Rush</title>
  <link rel='stylesheet' href='style.css' />
</head>

  <body>
  <div id='app-frame'>
    <header id='app-header'>
      <div class='app-title'>STACK RUSH</div>
    </header>

    <div id="container">
      <div id="game"></div>
      <div id="score">0</div>

      <div id="instructions">
        Tap to place the block
      </div>

      <div class="game-over">
        <h2>Game Over</h2>
        <p>You did great, you are the best.</p>
        <p>Tap to start again</p>
      </div>

      <div class="game-ready">
        <button id="connect-button">Connect wallet</button>
        <div id="start-button">Start</div>
        <div></div>
      </div>
    </div>
  </div>

<script src="script.js"></script>
<script type="module">
  import { sdk } from "https://esm.sh/@farcaster/miniapp-sdk"

  // share sdk with script.js
  window.miniappSdk = sdk

  ;(async () => {
    try {
      // tell Farcaster we are ready
      await sdk.actions.ready()

      // only try addMiniApp if actually inside mini app
      const inMini = await sdk.isInMiniApp?.()
      if (inMini) {
        await sdk.actions.addMiniApp()
      }
    } catch (err) {
      console.error("miniapp setup error", err)
    }
  })()
</script>

</body>
</html>